<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.14.3"><link rel="sitemap" href="/sitemap-index.xml"><meta name="google-site-verification" content="v-bk1pawOow2Be4T46sqQG2YNDa84WSjgOUgykNr4_M"><title>Rails form better disable Turbo</title><style>*,*:before,*:after{box-sizing:border-box}*{margin:0}body{line-height:1.5;-webkit-font-smoothing:antialiased}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{overflow-wrap:break-word}#root,#__next{isolation:isolate}body{font-size:x-large}
</style></head> <body> <header class="header"> <nav> <a href="/">Home</a> |
<a href="/projects/">Projects</a> |
<a href="/about/">About</a> -
<a href="https://www.github.com/tombohub">github</a> </nav> </header>  <h2>Rails form better disable Turbo</h2> <p>This form didnâ€™t wanna display validation errors:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ruby"><code><span class="line"><span style="color:#F97583">&#x3C;%=</span><span style="color:#E1E4E8"> form_with </span><span style="color:#79B8FF">model:</span><span style="color:#E1E4E8"> @todo </span><span style="color:#F97583">do</span><span style="color:#E1E4E8"> |form| </span><span style="color:#9ECBFF">%></span></span>
<span class="line"><span style="color:#9ECBFF">    &#x3C;%= form.text_field :title %></span></span>
<span class="line"><span style="color:#F97583">    &#x3C;%=</span><span style="color:#E1E4E8"> form.submit </span><span style="color:#9ECBFF">%></span></span>
<span class="line"><span style="color:#9ECBFF">&#x3C;% end %></span></span>
<span class="line"></span></code></pre>
<p>for this model:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ruby"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> Todo</span><span style="color:#F97583"> &#x3C;</span><span style="color:#B392F0"> ApplicationRecord</span></span>
<span class="line"><span style="color:#E1E4E8">  enum </span><span style="color:#79B8FF">status:</span><span style="color:#E1E4E8"> { </span><span style="color:#9ECBFF">'Not Done'</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Done'</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8"> }</span></span>
<span class="line"><span style="color:#E1E4E8">  validates </span><span style="color:#79B8FF">:title</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">presence:</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">length:</span><span style="color:#E1E4E8"> { </span><span style="color:#79B8FF">minimum:</span><span style="color:#79B8FF"> 3</span><span style="color:#E1E4E8"> }</span></span>
<span class="line"><span style="color:#F97583">end</span></span>
<span class="line"></span></code></pre>
<br>
<p>controller:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ruby"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> TodosController</span><span style="color:#F97583"> &#x3C;</span><span style="color:#B392F0"> ApplicationController</span></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> index</span></span>
<span class="line"><span style="color:#E1E4E8">    @todos </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Todo</span><span style="color:#E1E4E8">.all</span></span>
<span class="line"><span style="color:#E1E4E8">    @todo </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Todo</span><span style="color:#E1E4E8">.</span><span style="color:#F97583">new</span></span>
<span class="line"><span style="color:#F97583">  end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> create</span></span>
<span class="line"><span style="color:#E1E4E8">    @todo </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Todo</span><span style="color:#E1E4E8">.</span><span style="color:#F97583">new</span><span style="color:#E1E4E8">(todo_params)</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> @todo.save</span></span>
<span class="line"><span style="color:#E1E4E8">      redirect_to todos_path, </span><span style="color:#79B8FF">notice:</span><span style="color:#9ECBFF"> "Todo was created"</span></span>
<span class="line"><span style="color:#F97583">    else</span></span>
<span class="line"><span style="color:#E1E4E8">      @todos </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> Todo</span><span style="color:#E1E4E8">.all</span></span>
<span class="line"><span style="color:#E1E4E8">      render </span><span style="color:#79B8FF">:index</span></span>
<span class="line"><span style="color:#F97583">    end</span></span>
<span class="line"><span style="color:#F97583">  end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  private</span></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> todo_params</span></span>
<span class="line"><span style="color:#E1E4E8">    params.require(</span><span style="color:#79B8FF">:todo</span><span style="color:#E1E4E8">).permit(</span><span style="color:#79B8FF">:title</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">  end</span></span>
<span class="line"><span style="color:#F97583">end</span></span>
<span class="line"></span></code></pre>
<br>
<p>The reason is Turbo is activated. Disable Turbo in form submission:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ruby"><code><span class="line"><span style="color:#F97583">&#x3C;%=</span><span style="color:#E1E4E8"> form_with </span><span style="color:#79B8FF">model:</span><span style="color:#E1E4E8"> @todo, </span><span style="color:#79B8FF">data:</span><span style="color:#E1E4E8"> {</span><span style="color:#79B8FF">turbo:</span><span style="color:#79B8FF"> false</span><span style="color:#E1E4E8">} </span><span style="color:#F97583">do</span><span style="color:#E1E4E8"> |form| </span><span style="color:#9ECBFF">%></span></span>
<span class="line"><span style="color:#9ECBFF">    &#x3C;%= form.text_field :title %></span></span>
<span class="line"><span style="color:#F97583">    &#x3C;%=</span><span style="color:#E1E4E8"> form.submit </span><span style="color:#9ECBFF">%></span></span>
<span class="line"><span style="color:#9ECBFF">&#x3C;% end %></span></span>
<span class="line"></span></code></pre>
<br>
<p>This is another mental load for beginners and time spent for beginners. Rails is truly very opinionated framework.</p>  <footer></footer> </body></html>