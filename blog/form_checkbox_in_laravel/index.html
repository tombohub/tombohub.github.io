<!DOCTYPE html><html lang="en" data-theme="vader"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v4.14.3"><!-- <link rel="stylesheet" href="https://unpkg.com/boltcss/bolt.min.css" /> --><!-- <link rel="stylesheet" href="https://classless.de/classless.css" />
    <link rel="stylesheet" href="https://classless.de/addons/themes.css" /> --><!-- <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/holiday.css@0.11.2"
    /> --><!-- <link rel="stylesheet" href="https://unpkg.com/mvp.css" /> --><!-- <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
    /> --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sakura.css/css/sakura-radical.css" type="text/css"><!-- <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" /> --><!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/spcss@0.9.0" /> --><!-- <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/yegor256/tacit@gh-pages/tacit-css.min.css"
    /> --><!-- <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/tiny.css@0/dist/tiny.css"
    /> --><!-- <link
      rel="stylesheet"
      href="https://www.w3.org/StyleSheets/Core/Traditional"
      type="text/css"
    /> --><!-- <link
      rel="stylesheet"
      href="https://www.w3.org/StyleSheets/Core/Steely"
      type="text/css"
    /> --><!-- <link
      rel="stylesheet"
      href="https://www.w3.org/StyleSheets/Core/Oldstyle"
      type="text/css"
    /> --><!-- <link
      rel="stylesheet"
      href="https://www.w3.org/StyleSheets/Core/Ultramarine"
      type="text/css"
    /> --><!-- <link rel="stylesheet" href="//writ.cmcenroe.me/1.0.4/writ.min.css" /> --><!-- <link rel="stylesheet" href="https://unpkg.com/missing.css@1.1.2" /> --><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="sitemap" href="/sitemap-index.xml"><meta name="google-site-verification" content="v-bk1pawOow2Be4T46sqQG2YNDa84WSjgOUgykNr4_M"><title>How to submit checkbox in Laravel</title></head> <body> <header class="header"> <nav> <a href="/">Home</a> |
<a href="/projects/">Projects</a> |
<a href="/about/">About</a> -
<a href="https://www.github.com/tombohub">github</a> </nav> </header> <main>  <h2>How to submit checkbox in Laravel</h2> <article> <h3 id="problem">Problem</h3>
<p>Let’s say you have model with fields:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#79B8FF"> Schema</span><span style="color:#F97583">::</span><span style="color:#B392F0">create</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'projects'</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">Blueprint</span><span style="color:#E1E4E8"> $table) {</span></span>
<span class="line"><span style="color:#E1E4E8">            $table</span><span style="color:#F97583">-></span><span style="color:#B392F0">id</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">            $table</span><span style="color:#F97583">-></span><span style="color:#B392F0">boolean</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'is_published'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">-></span><span style="color:#B392F0">default</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">            $table</span><span style="color:#F97583">-></span><span style="color:#B392F0">timestamps</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        });</span></span>
<span class="line"></span></code></pre>
<p>Create checkbox form, suitable for create and edit, like this:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">&#x3C;</span><span style="color:#79B8FF">form</span><span style="color:#79B8FF"> action</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"{{ route('projects.store') }}"</span><span style="color:#79B8FF"> method</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"POST"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">    @</span><span style="color:#79B8FF">csrf</span></span>
<span class="line"><span style="color:#F97583">        &#x3C;</span><span style="color:#79B8FF">input</span><span style="color:#F97583"> class=</span><span style="color:#9ECBFF">"form-check-input"</span><span style="color:#79B8FF"> type</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"checkbox"</span><span style="color:#79B8FF"> id</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"is_published"</span></span>
<span class="line"><span style="color:#79B8FF">         name</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"is_published"</span></span>
<span class="line"><span style="color:#F97583">         @</span><span style="color:#B392F0">checked</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">old</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'is_published'</span><span style="color:#E1E4E8">, $project</span><span style="color:#F97583">-></span><span style="color:#E1E4E8">is_published </span><span style="color:#F97583">??</span><span style="color:#9ECBFF"> ''</span><span style="color:#E1E4E8">))</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">        &#x3C;</span><span style="color:#79B8FF">label</span><span style="color:#F97583"> class=</span><span style="color:#9ECBFF">"form-check-label"</span><span style="color:#F97583"> for=</span><span style="color:#9ECBFF">"is_published"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#79B8FF">        Is</span><span style="color:#79B8FF"> published</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">        &#x3C;/</span><span style="color:#79B8FF">label</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">    &#x3C;</span><span style="color:#79B8FF">button</span><span style="color:#F97583"> class=</span><span style="color:#9ECBFF">"btn btn-primary"</span><span style="color:#79B8FF"> type</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"submit"</span><span style="color:#F97583">></span><span style="color:#79B8FF">Submit</span><span style="color:#F97583">&#x3C;/</span><span style="color:#79B8FF">button</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">&#x3C;/</span><span style="color:#79B8FF">form</span><span style="color:#F97583">></span></span>
<span class="line"></span></code></pre>
<p><code>@checked</code> in here:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">@</span><span style="color:#B392F0">checked</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">old</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'is_published'</span><span style="color:#E1E4E8">, $project</span><span style="color:#F97583">-></span><span style="color:#E1E4E8">is_published </span><span style="color:#F97583">??</span><span style="color:#9ECBFF"> ''</span><span style="color:#E1E4E8">))</span></span>
<span class="line"></span></code></pre>
<p>is a shorthand to make the checkbox checked or unchecked when it renders. More info in the <a href="https://laravel.com/docs/11.x/blade#additional-attributes">docs</a></p>
<p>Problem is, in form submission checkbox doesn’t send anything if it’s unchecked. It only sends value, default value is <code>on</code>, in payload if it’s checked.</p>
<p>Problem is because if you have validation <code>'is_published' => 'boolean',</code> that will give error <code>is published must be true or false</code> after you submit the form.</p>
<h3 id="solution">Solution</h3>
<p>One way to solve this is</p>
<ol>
<li>Create <code>ProjectRequest</code>:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>php artisan make:request ProjectRequest</span></span>
<span class="line"><span></span></span></code></pre>
<ol start="2">
<li>In generated class, in method <code>rules</code> add validation <code>'is_published' => 'boolean'</code> and function looks now like this:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583">  *</span><span style="color:#79B8FF"> Get</span><span style="color:#79B8FF"> the</span><span style="color:#79B8FF"> validation</span><span style="color:#79B8FF"> rules</span><span style="color:#79B8FF"> that</span><span style="color:#79B8FF"> apply</span><span style="color:#79B8FF"> to</span><span style="color:#79B8FF"> the</span><span style="color:#79B8FF"> request</span><span style="color:#F97583">.</span></span>
<span class="line"><span style="color:#F97583">     *</span></span>
<span class="line"><span style="color:#F97583">     *</span><span style="color:#F97583"> @return</span><span style="color:#F97583"> array&#x3C;string</span><span style="color:#E1E4E8">, \</span><span style="color:#79B8FF">Illuminate</span><span style="color:#E1E4E8">\</span><span style="color:#79B8FF">Contracts</span><span style="color:#E1E4E8">\</span><span style="color:#79B8FF">Validation</span><span style="color:#E1E4E8">\</span><span style="color:#79B8FF">ValidationRule</span><span style="color:#F97583">|array&#x3C;mixed>|string></span></span>
<span class="line"><span style="color:#F97583">     */</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> rules</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">:</span><span style="color:#F97583"> array</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#9ECBFF">            'name'</span><span style="color:#F97583"> =></span><span style="color:#9ECBFF"> 'required|string|max:255'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">            'github_repo_url'</span><span style="color:#F97583"> =></span><span style="color:#9ECBFF"> 'nullable|url'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">            'website_url'</span><span style="color:#F97583"> =></span><span style="color:#9ECBFF"> 'nullable|url'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#9ECBFF">            'is_published'</span><span style="color:#F97583"> =></span><span style="color:#9ECBFF"> 'boolean'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        ];</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>If you don’t want authorization return true in method <code>authorize</code>:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D"> /**</span></span>
<span class="line"><span style="color:#6A737D">     * Determine if the user is authorized to make this request.</span></span>
<span class="line"><span style="color:#6A737D">     */</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> authorize</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">:</span><span style="color:#F97583"> bool</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span></code></pre>
<ol start="3">
<li>Create a new method <code>prepareForValidation</code>. Name is important because this overriding parent <code>FormRequest</code> class. In this function you can do some logic with submitted form data before it is passed to <code>rules</code> method.</li>
</ol>
<p>In this method check if form submit request contains <code>is_published</code> key. If it does it must be true, because as <code>is_published</code> is not in form submit if it’s not checked.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#F97583"> protected</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> prepareForValidation</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#79B8FF">        $this</span><span style="color:#F97583">-></span><span style="color:#B392F0">merge</span><span style="color:#E1E4E8">([</span></span>
<span class="line"><span style="color:#9ECBFF">            'is_published'</span><span style="color:#F97583"> =></span><span style="color:#79B8FF"> $this</span><span style="color:#F97583">-></span><span style="color:#B392F0">has</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'is_published'</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">?</span><span style="color:#79B8FF"> true</span><span style="color:#F97583"> :</span><span style="color:#79B8FF"> false</span></span>
<span class="line"><span style="color:#E1E4E8">        ]);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span></code></pre>
<ol start="4">
<li>Now you can pass <code>ProjectRequest</code> to the controller action:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="php"><code><span class="line"><span style="color:#6A737D">   /**</span></span>
<span class="line"><span style="color:#6A737D">     * Store a newly created resource in storage.</span></span>
<span class="line"><span style="color:#6A737D">     */</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> store</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">ProjectRequest</span><span style="color:#E1E4E8"> $request)</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#79B8FF">        Project</span><span style="color:#F97583">::</span><span style="color:#B392F0">create</span><span style="color:#E1E4E8">($request</span><span style="color:#F97583">-></span><span style="color:#B392F0">validated</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#B392F0"> redirect</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">-></span><span style="color:#B392F0">route</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'projects.index'</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">-></span><span style="color:#B392F0">with</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'success'</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'Project created.'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span></code></pre>
<h3 id="final-word">Final word</h3>
<p>It works on my computer.</p> </article>  </main> <footer></footer> <script src="https://dohliam.github.io/dropin-minimal-css/switcher.js" type="text/javascript"></script> </body> </html>